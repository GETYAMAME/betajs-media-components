/*!
betajs-media-components - v0.0.11 - 2016-02-16
Copyright (c) Ziggeo,Oliver Friedmann
Apache 2.0 Software License.
*/
var Scoped=function(){function a(a){function b(a){return{route:"string"==typeof a.route?a.route:null,parent:"object"==typeof a.parent?a.parent:null,ready:"boolean"==typeof a.ready?a.ready:!1,children:{},watchers:[],data:{},lazy:[]}}function c(a){if(!a.ready){if(a.parent&&!a.parent.ready)return void c(a.parent);if(a.route&&a.parent&&a.route in a.parent.data){a.data=a.parent.data[a.route],a.ready=!0;for(var b=0;b<a.watchers.length;++b)a.watchers[b].callback.call(a.watchers[b].context||this,a.data);a.watchers=[];for(var d in a.children)c(a.children[d])}}}function d(a){if(!a.ready){a.parent&&!a.parent.ready&&d(a.parent),a.ready=!0,a.parent&&j.tree&&"object"==typeof a.parent.data&&(a.parent.data[a.route]=a.data);for(var b=0;b<a.watchers.length;++b)a.watchers[b].callback.call(a.watchers[b].context||this,a.data);a.watchers=[]}}function e(a,b){if("object"==typeof b&&a.ready)for(var e in b)a.data[e]=b[e];else a.data=b;if("object"==typeof b)for(var f in b)a.children[f]&&(a.children[f].data=b[f]);d(a);for(var g in a.children)c(a.children[g])}function f(a){if(a.ready&&a.data)for(var b in a.data)delete a.data[b]}function g(a){if(!a)return k;for(var d=a.split("."),e=k,f=0;f<d.length;++f)d[f]in e.children?e=e.children[d[f]]:(e.children[d[f]]=b({parent:e,route:d[f]}),e=e.children[d[f]],c(e));return e}function h(a,b,c){if(a.ready)b.call(c||this,a.data);else if(a.watchers.push({callback:b,context:c}),a.lazy.length>0){var d=function(a){if(a.lazy.length>0){var b=a.lazy.shift();b.callback.call(b.context||this,a.data),d(a)}};d(a)}}function i(a,b,c){a=a||k,c=c||[],a.ready||c.push(b);for(var d in a.children){var e=a.children[d],f=(b?b+".":"")+e.route;c=i(e,f,c)}return c}var j={tree:"boolean"==typeof a.tree?a.tree:!1,global:"boolean"==typeof a.global?a.global:!1,root:"object"==typeof a.root?a.root:{}},k=b({ready:!0});if(j.tree)if(j.global){try{window&&(k.data=window)}catch(l){}try{global&&(k.data=global)}catch(l){}}else k.data=j.root;return{extend:function(a,b){e(g(a),b)},set:function(a,b){var c=g(a);c.data&&f(c),e(c,b)},get:function(a){var b=g(a);return b.ready?b.data:null},lazy:function(a,b,c){var d=g(a);d.ready?b(c||this,d.data):d.lazy.push({callback:b,context:c})},digest:function(a){c(g(a))},obtain:function(a,b,c){h(g(a),b,c)},unresolvedWatchers:function(a){return i(g(a),a)},__export:function(){return{options:j,nsRoot:k}},__import:function(a){j=a.options,k=a.nsRoot}}}function b(e,f,g,h){var i=null,j=[],k=f,l=g,m=h,n=a({tree:!0}),o=a({tree:!1}),p={global:{namespace:m},root:{namespace:l},local:{namespace:n},"default":{namespace:o},parent:{namespace:k},scope:{namespace:n,readonly:!1}},q=function(a,b,c){var e=d.matchArgs(a,{options:"object",namespaceLocator:!0,dependencies:"array",hiddenDependencies:"array",callback:!0,context:"object"}),f=d.extend({lazy:this.options.lazy},e.options||{}),g=this.resolve(e.namespaceLocator),h=function(){this.require(e.dependencies,e.hiddenDependencies,function(){if(arguments[arguments.length-1].ns=g,this.options.compile){for(var f=[],h=0;h<a.length;++h)f.push(d.stringify(a[h]));this.compiled+=this.options.ident+"."+b+"("+f.join(", ")+");\n\n"}var i=this.options.compile?{}:e.callback.apply(e.context||this,arguments);c.call(this,g,i)},this)};return f.lazy?g.namespace.lazy(g.path,h,this):h.apply(this),this};return{getGlobal:d.method(c,c.getPath),setGlobal:d.method(c,c.setPath),options:{lazy:!1,ident:"Scoped",compile:!1},compiled:"",nextScope:function(){return i||(i=b(this,n,l,m)),i},subScope:function(){var a=this.nextScope();return j.push(a),i=null,a},binding:function(b,c,e){if(!p[b]||!p[b].readonly){var f;f="string"!=d.typeOf(c)?{namespace:a({tree:!0,root:c}),path:null}:this.resolve(c),p[b]=d.extend(e,f)}return this},resolve:function(a){var b=a.split(":");if(1==b.length)return{namespace:o,path:b[0]};var c=p[b[0]];if(!c)throw"The namespace '"+b[0]+"' has not been defined (yet).";return{namespace:c.namespace,path:c.path&&b[1]?c.path+"."+b[1]:c.path||b[1]}},define:function(){return q.call(this,arguments,"define",function(a,b){if(a.namespace.get(a.path))throw"Scoped namespace "+a.path+" has already been defined. Use extend to extend an existing namespace instead";a.namespace.set(a.path,b)})},assume:function(){var a=d.matchArgs(arguments,{assumption:!0,dependencies:"array",callback:!0,context:"object",error:"string"}),b=a.dependencies||[];b.unshift(a.assumption),this.require(b,function(b){if(!a.callback.apply(a.context||this,arguments))throw"Scoped Assumption '"+a.assumption+"' failed, value is "+b+(a.error?", but assuming "+a.error:"")})},assumeVersion:function(){var a=d.matchArgs(arguments,{assumption:!0,dependencies:"array",callback:!0,context:"object",error:"string"}),b=a.dependencies||[];b.unshift(a.assumption),this.require(b,function(){var b=arguments,c=b[0];b[0]=c.split(".");for(var e=0;e<b[0].length;++e)b[0][e]=parseInt(b[0][e],10);if("function"===d.typeOf(a.callback)){if(!a.callback.apply(a.context||this,a))throw"Scoped Assumption '"+a.assumption+"' failed, value is "+c+(a.error?", but assuming "+a.error:"")}else for(var f=(a.callback+"").split("."),g=0;g<Math.min(b[0].length,f.length);++g)if(parseInt(f[g],10)>b[0][g])throw"Scoped Version Assumption '"+a.assumption+"' failed, value is "+c+", but assuming at least "+a.callback})},extend:function(){return q.call(this,arguments,"extend",function(a,b){a.namespace.extend(a.path,b)})},condition:function(){return q.call(this,arguments,"condition",function(a,b){b&&a.namespace.set(a.path,b)})},require:function(){var a=d.matchArgs(arguments,{dependencies:"array",hiddenDependencies:"array",callback:"function",context:"object"});a.callback=a.callback||function(){};var b=a.dependencies||[],c=b.concat(a.hiddenDependencies||[]),e=c.length,f=[],g={};if(e)for(var h=function(b){this.i<f.length&&(f[this.i]=b),e--,0===e&&(f.push(g),a.callback.apply(a.context||this.ctx,f))},i=0;i<c.length;++i){var j=this.resolve(c[i]);i<b.length&&f.push(null),j.namespace.obtain(j.path,h,{ctx:this,i:i})}else f.push(g),a.callback.apply(a.context||this,f);return this},digest:function(a){var b=this.resolve(a);return b.namespace.digest(b.path),this},unresolved:function(a){var b=this.resolve(a);return b.namespace.unresolvedWatchers(b.path)},__export:function(){return{parentNamespace:k.__export(),rootNamespace:l.__export(),globalNamespace:m.__export(),localNamespace:n.__export(),privateNamespace:o.__export()}},__import:function(a){k.__import(a.parentNamespace),l.__import(a.rootNamespace),m.__import(a.globalNamespace),n.__import(a.localNamespace),o.__import(a.privateNamespace)}}}var c={get:function(a){return"undefined"!=typeof window?window[a]:"undefined"!=typeof global?global[a]:null},set:function(a,b){return"undefined"!=typeof window&&(window[a]=b),"undefined"!=typeof global&&(global[a]=b),b},setPath:function(a,b){var c=a.split(".");if(1==c.length)return this.set(a,b);for(var d=this.get(c[0])||this.set(c[0],{}),e=1;e<c.length-1;++e)c[e]in d||(d[c[e]]={}),d=d[c[e]];return d[c[c.length-1]]=b,b},getPath:function(a){var b=a.split(".");if(1==b.length)return this.get(a);for(var c=this.get(b[0]),d=1;d<b.length;++d){if(!c)return c;c=c[b[d]]}return c}},d={method:function(a,b){return function(){return b.apply(a,arguments)}},extend:function(a,b){a=a||{},b=b||{};for(var c in b)a[c]=b[c];return a},typeOf:function(a){return"[object Array]"===Object.prototype.toString.call(a)?"array":typeof a},isEmpty:function(a){if(null===a||"undefined"==typeof a)return!0;if("array"==this.typeOf(a))return 0===a.length;if("object"!=typeof a)return!1;for(var b in a)return!1;return!0},matchArgs:function(a,b){var c=0,d={};for(var e in b)b[e]===!0||this.typeOf(a[c])==b[e]?(d[e]=a[c],c++):"undefined"==this.typeOf(a[c])&&c++;return d},stringify:function(a){return"function"==this.typeOf(a)?""+a:JSON.stringify(a)}},e={__namespace:"Scoped",__revert:null,upgrade:function(a){var b=c.get(a||e.__namespace);if(b&&"object"==d.typeOf(b)&&b.guid==this.guid&&"string"==d.typeOf(b.version)){for(var f=this.version.split("."),g=b.version.split("."),h=!1,i=0;i<Math.min(f.length,g.length)&&(h=parseInt(f[i],10)>parseInt(g[i],10),f[i]==g[i]);++i);return h?this.attach(a):b}return this.attach(a)},attach:function(a){a&&(e.__namespace=a);var b=c.get(e.__namespace);if(b==this)return this;if(e.__revert=b,b)try{var d=b.__exportScoped();this.__exportBackup=this.__exportScoped(),this.__importScoped(d)}catch(f){}return c.set(e.__namespace,this),this},detach:function(a){return a&&c.set(e.__namespace,null),"undefined"!=typeof e.__revert&&c.set(e.__namespace,e.__revert),delete e.__revert,e.__exportBackup&&this.__importScoped(e.__exportBackup),this},exports:function(a,b,c){return a=a||("undefined"!=typeof module?module:null),"object"==typeof a&&a&&"exports"in a&&(c||a.exports==this||!a.exports||d.isEmpty(a.exports))&&(a.exports=b||this),this}},f=a({tree:!0,global:!0}),g=a({tree:!0}),h=b(null,g,g,f),i=d.extend(h,{guid:"4b6878ee-cb6a-46b3-94ac-27d91f58d666",version:"37.1454812115138",upgrade:e.upgrade,attach:e.attach,detach:e.detach,exports:e.exports,__exportScoped:function(){return{globalNamespace:f.__export(),rootNamespace:g.__export(),rootScope:h.__export()}},__importScoped:function(a){f.__import(a.globalNamespace),g.__import(a.rootNamespace),h.__import(a.rootScope)}});return i=i.upgrade(),i.exports(),i}.call(this);(function(){var a=this.subScope();a.binding("module","global:BetaJS.MediaComponents"),a.binding("base","global:BetaJS"),a.binding("browser","global:BetaJS.Browser"),a.binding("flash","global:BetaJS.Flash"),a.binding("media","global:BetaJS.Media"),a.binding("dynamics","global:BetaJS.Dynamics"),a.binding("jquery","global:jQuery"),a.define("module:",function(){return{guid:"7a20804e-be62-4982-91c6-98eb096d2e70",version:"21.1455673271079"}}),a.assumeVersion("base:version",474),a.assumeVersion("browser:version",70),a.assumeVersion("flash:version",27),a.assumeVersion("dynamics:version",219),a.assumeVersion("media:version",42),a.extend("module:Templates",function(){return{controlbar:' <div class="{{css}}-dashboard {{activitydelta > 5000 ? (css + \'-dashboard-hidden\') : \'\'}}">  <div class="{{css}}-progressbar {{activitydelta < 2500 || ismobile ? \'\' : (css + \'-progressbar-small\')}}"       onmousedown="{{startUpdatePosition(domEvent)}}"       onmouseup="{{stopUpdatePosition(domEvent)}}"       onmouseleave="{{stopUpdatePosition(domEvent)}}"       onmousemove="{{progressUpdatePosition(domEvent)}}">   <div class="{{css}}-progressbar-cache" ba-styles="{{{width: Math.round(duration ? cached / duration * 100 : 0) + \'%\'}}}"></div>   <div class="{{css}}-progressbar-position" ba-styles="{{{width: Math.round(duration ? position / duration * 100 : 0) + \'%\'}}}" title="{{string(\'video-progress\')}}">    <div class="{{css}}-progressbar-button"></div>   </div>  </div>  <div class="{{css}}-backbar"></div>  <div class="{{css}}-controlbar">         <div class="{{css}}-leftbutton-container" ba-if="{{rerecordable}}"  ba-click="rerecord()" title="{{string(\'rerecord-video\')}">             <div class="{{css}}-button-inner">                 <i class="{{css}}-icon-ccw"></i>             </div>         </div>   <div class="{{css}}-leftbutton-container" ba-if="{{!playing}}" ba-click="play()" title="{{string(\'play-video\')}}">    <div class="{{css}}-button-inner">     <i class="{{css}}-icon-play"></i>    </div>   </div>   <div class="{{css}}-leftbutton-container" ba-if="{{playing}}" ba-click="pause()" title="{{string(\'pause-video\')}}">             <div class="{{css}}-button-inner">                 <i class="{{css}}-icon-pause"></i>             </div>   </div>   <div class="{{css}}-time-container">    <div class="{{css}}-time-value" title="{{string(\'elapsed-time\')}}">{{position_formatted}}</div>    <div class="{{css}}-time-sep">/</div>    <div class="{{css}}-time-value" title="{{string(\'total-time\')}}">{{duration_formatted}}</div>   </div>   <div class="{{css}}-rightbutton-container" ba-if="{{fullscreen}}" ba-click="toggle_fullscreen()" title="{{string(\'fullscreen-video\')}}">    <div class="{{css}}-button-inner">     <i class="{{css}}-icon-resize-full"></i>    </div>   </div>   <div class="{{css}}-volumebar">    <div class="{{css}}-volumebar-inner"         onmousedown="{{startUpdateVolume(domEvent)}}"                  onmouseup="{{stopUpdateVolume(domEvent)}}"                  onmouseleave="{{stopUpdateVolume(domEvent)}}"                  onmousemove="{{progressUpdateVolume(domEvent)}}">     <div class="{{css}}-volumebar-position" ba-styles="{{{width: Math.min(100, Math.round(volume * 100)) + \'%\'}}}">         <div class="{{css}}-volumebar-button" title="{{string(\'volume-button\')}}"></div>     </div>        </div>   </div>   <div class="{{css}}-rightbutton-container" ba-click="toggle_volume()" title="{{string(volume > 0 ? \'volume-mute\' : \'volume-unmute\')}}">    <div class="{{css}}-button-inner">     <i class="{{css + \'-icon-volume-\' + (volume >= 0.5 ? \'up\' : (volume > 0 ? \'down\' : \'off\')) }}"></i>    </div>   </div>  </div> </div> ',loader:' <div class="{{css}}-loader-container">     <div class="{{css}}-loader-loader" title="{{string(\'tooltip\')}}">     </div> </div>',message:' <div class="{{css}}-message-container" ba-click="click()">     <div class=\'{{css}}-message-message\'>         {{message}}     </div> </div>',playbutton:' <div class="{{css}}-playbutton-container" ba-click="play()" title="{{string(\'tooltip\')}}">  <div class="{{css}}-playbutton-button"></div> </div> ',player:' <div     class="{{css}}-container {{iecss}}-{{ie8 ? \'ie8\' : \'noie8\'}} {{csstheme}}"     ba-on:mousemove="user_activity()"     ba-on:mousedown="user_activity()"     ba-on:touchstart="user_activity()" >     <video class="{{css}}-video" data-video="video"></video>     <div class=\'{{css}}-overlay\'>              <ba-{{dyncontrolbar}}             ba-css="{{csscontrolbar || css}}"             ba-template="{{tmplcontrolbar}}"             ba-show="{{controlbar_active}}"             ba-playing="{{playing}}"             ba-event:rerecord="rerecord"             ba-event:play="play"             ba-event:pause="pause"             ba-event:position="seek"             ba-event:volume="set_volume"             ba-event:fullscreen="toggle_fullscreen"             ba-volume="{{volume}}"             ba-duration="{{duration}}"             ba-cached="{{buffered}}"             ba-position="{{position}}"             ba-activitydelta="{{activity_delta}}"             ba-rerecordable="{{rerecordable}}"             ba-fullscreen="{{fullscreensupport}}"         ></ba-{{dyncontrolbar}}>                  <ba-{{dynplaybutton}}             ba-css="{{cssplaybutton || css}}"             ba-template="{{tmplplaybutton}}"             ba-show="{{playbutton_active}}"             ba-event:play="playbutton_click"         ></ba-{{dynplaybutton}}>                  <ba-{{dynloader}}             ba-css="{{cssloader || css}}"             ba-template="{{tmplloader}}"             ba-show="{{loader_active}}"         ></ba-{{dynloader}}>                  <ba-{{dynmessage}}             ba-css="{{cssmessage || css}}"             ba-template="{{tmplmessage}}"             ba-show="{{message_active}}"             ba-message="{{message}}"             ba-event:click="message_click"         ></ba-{{dynmessage}}>     </div> </div> ',"modern-controlbar":' <div class="{{css}}-dashboard {{activitydelta > 5000 ? (css + \'-dashboard-hidden\') : \'\'}}">        <div class="{{css}}-leftbutton-container" ba-if="{{rerecordable}}" ba-click="rerecord()" title="{{string(\'rerecord-video\')}">            <div class="{{css}}-button-inner">                <i class="{{css}}-icon-ccw"></i>            </div>        </div>  <div class="{{css}}-leftbutton-container" ba-if="{{!playing}}" ba-click="play()" title="{{string(\'play-video\')}}">   <div class="{{css}}-button-inner">    <i class="{{css}}-icon-play"></i>   </div>  </div>  <div class="{{css}}-leftbutton-container" ba-if="{{playing}}" ba-click="pause()" title="{{string(\'pause-video\')}}">    <div class="{{css}}-button-inner">    <i class="{{css}}-icon-pause"></i>   </div>  </div>  <div class="{{css}}-time-container">   <div class="{{css}}-time-value" title="{{string(\'elapsed-time\')}}">{{position_formatted}}/{{duration_formatted}}</div>  </div>  <div class="{{css}}-rightbutton-container" ba-if="{{fullscreen}}" ba-click="toggle_fullscreen()" title="{{string(\'fullscreen-video\')}}">   <div class="{{css}}-button-inner">    <i class="{{css}}-icon-resize-full"></i>   </div>  </div>  <div class="{{css}}-volumebar">   <div class="{{css}}-volumebar-inner"           onmousedown="{{startUpdateVolume(domEvent)}}"                 onmouseup="{{stopUpdateVolume(domEvent)}}"                 onmouseleave="{{stopUpdateVolume(domEvent)}}"                 onmousemove="{{progressUpdateVolume(domEvent)}}">    <div class="{{css}}-volumebar-position" ba-styles="{{{width: Math.ceil(1+Math.min(99, Math.round(volume * 100))) + \'%\'}}}" title="{{string(\'volume-button\')}}"></div>       </div>  </div>  <div class="{{css}}-rightbutton-container" ba-click="toggle_volume()" title="{{string(volume > 0 ? \'volume-mute\' : \'volume-unmute\')}}">   <div class="{{css}}-button-inner">    <i class="{{css + \'-icon-volume-\' + (volume >= 0.5 ? \'up\' : (volume > 0 ? \'down\' : \'off\')) }}"></i>   </div>  </div>  <div class="{{css}}-progressbar">   <div class="{{css}}-progressbar-inner"        onmousedown="{{startUpdatePosition(domEvent)}}"        onmouseup="{{stopUpdatePosition(domEvent)}}"        onmouseleave="{{stopUpdatePosition(domEvent)}}"        onmousemove="{{progressUpdatePosition(domEvent)}}">   <div class="{{css}}-progressbar-cache" ba-styles="{{{width: Math.round(duration ? cached / duration * 100 : 0) + \'%\'}}}"></div>   <div class="{{css}}-progressbar-position" ba-styles="{{{width: Math.round(duration ? position / duration * 100 : 0) + \'%\'}}}" title="{{string(\'video-progress\')}}"></div>  </div> </div> '}}),a.extend("module:Assets",["module:Assets"],function(a){var b={"language:de":{"ba-videoplayer-playbutton.tooltip":"Hier clicken um Wiedergabe zu starten.","ba-videoplayer-loader.tooltip":"Video wird geladen...","ba-videoplayer-controlbar.video-progress":"Videofortschritt","ba-videoplayer-controlbar.rerecord-video":"Video erneut aufnehmen?","ba-videoplayer-controlbar.play-video":"Video wiedergeben","ba-videoplayer-controlbar.pause-video":"Video pausieren","ba-videoplayer-controlbar.elapsed-time":"Vergangene Zeit","ba-videoplayer-controlbar.total-time":"L&#xE4;nge des Videos","ba-videoplayer-controlbar.fullscreen-video":"Vollbildmodus","ba-videoplayer-controlbar.volume-button":"Lautst&#xE4;rke regulieren","ba-videoplayer-controlbar.volume-mute":"Ton abstellen","ba-videoplayer-controlbar.volume-unmute":"Ton wieder einstellen","ba-videoplayer.video-error":"Es ist ein Fehler aufgetreten, bitte versuchen Sie es sp&#xE4;ter noch einmal. Hier klicken, um es noch einmal zu probieren."}};for(var c in b)a.strings.register(b[c],[c]);return{}}),a.define("module:Assets",["base:Classes.LocaleTable","browser:Info"],function(a,b){var c=new a;return c.setWeakLocale(b.language()),{strings:c,themes:{}}}),a.define("module:VideoPlayer.Dynamics.Controlbar",["dynamics:Dynamic","base:Time","module:Templates","jquery:","module:Assets","browser:Info"],["dynamics:Partials.StylesPartial","dynamics:Partials.ShowPartial","dynamics:Partials.IfPartial","dynamics:Partials.ClickPartial"],function(a,b,c,d,e,f,g){return a.extend({scoped:g},function(a){return{template:c.controlbar,attrs:{css:"ba-videoplayer",duration:0,position:0,cached:0,volume:1,expandedprogress:!0,playing:!1,rerecordable:!1,fullscreen:!0,activitydelta:0},functions:{startUpdatePosition:function(a){a[0].preventDefault(),this.set("_updatePosition",!0),this.call("progressUpdatePosition",a)},progressUpdatePosition:function(a){a[0].preventDefault(),this.get("_updatePosition")&&(this.set("position",this.get("duration")*(a[0].clientX-d(a[0].currentTarget).offset().left)/d(a[0].currentTarget).width()),this.trigger("position",this.get("position")))},stopUpdatePosition:function(a){a[0].preventDefault(),this.set("_updatePosition",!1)},startUpdateVolume:function(a){a[0].preventDefault(),this.set("_updateVolume",!0),this.call("progressUpdateVolume",a)},progressUpdateVolume:function(a){a[0].preventDefault(),this.get("_updateVolume")&&(this.set("volume",(a[0].clientX-d(a[0].currentTarget).offset().left)/d(a[0].currentTarget).width()),this.trigger("volume",this.get("volume")))},stopUpdateVolume:function(a){a[0].preventDefault(),this.set("_updateVolume",!1)},play:function(){this.trigger("play")},pause:function(){this.trigger("pause")},toggle_volume:function(){this.get("volume")>0?(this.__oldVolume=this.get("volume"),this.set("volume",0)):this.set("volume",this.__oldVolume||1),this.trigger("volume",this.get("volume"))},toggle_fullscreen:function(){this.trigger("fullscreen")},rerecord:function(){this.trigger("rerecord")}},create:function(){this.properties().compute("position_formatted",function(){return b.formatTime(1e3*this.get("position"),"mm:ss")},["position"]),this.properties().compute("duration_formatted",function(){return b.formatTime(1e3*this.get("duration"),"mm:ss")},["duration"]),this.set("ismobile",f.isMobile())}}}).register("ba-videoplayer-controlbar").attachStringTable(e.strings).addStrings({"video-progress":"Video progress","rerecord-video":"Re-record video?","play-video":"Play video","pause-video":"Pause video","elapsed-time":"Elasped time","total-time":"Total length of video","fullscreen-video":"Enter fullscreen","volume-button":"Set volume","volume-mute":"Mute sound","volume-unmute":"Unmute sound"})}),a.define("module:VideoPlayer.Dynamics.Loader",["dynamics:Dynamic","module:Templates","module:Assets"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{template:b.loader,attrs:{css:"ba-videoplayer"}}}).register("ba-videoplayer-loader").attachStringTable(c.strings).addStrings({tooltip:"Loading video..."})}),a.define("module:VideoPlayer.Dynamics.Message",["dynamics:Dynamic","module:Templates"],["dynamics:Partials.ClickPartial"],function(a,b,c){return a.extend({scoped:c},function(a){return{template:b.message,attrs:{css:"ba-videoplayer",message:""},functions:{click:function(){this.trigger("click")}}}}).register("ba-videoplayer-message")}),a.define("module:VideoPlayer.Dynamics.Playbutton",["dynamics:Dynamic","module:Templates","module:Assets"],["dynamics:Partials.ClickPartial"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{template:b.playbutton,attrs:{css:"ba-videoplayer"},functions:{play:function(){this.trigger("play")}}}}).register("ba-videoplayer-playbutton").attachStringTable(c.strings).addStrings({tooltip:"Click to play video."})}),a.define("module:VideoPlayer.Dynamics.Player",["dynamics:Dynamic","module:Templates","module:Assets","browser:Info","media:Player.VideoPlayerWrapper","base:Types","base:Objs","base:Strings","base:Time","base:Timers","base:States.Host","base:Classes.ClassRegistry","module:VideoPlayer.Dynamics.PlayerStates.Initial","module:VideoPlayer.Dynamics.PlayerStates"],["module:VideoPlayer.Dynamics.Playbutton","module:VideoPlayer.Dynamics.Message","module:VideoPlayer.Dynamics.Loader","module:VideoPlayer.Dynamics.Controlbar","dynamics:Partials.EventPartial","dynamics:Partials.OnPartial","dynamics:Partials.TemplatePartial"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a.extend({scoped:o},function(a){return{template:b.player,attrs:{css:"ba-videoplayer",iecss:"ba-videoplayer",cssplaybutton:"",cssloader:"",cssmessage:"",csscontrolbar:"",theme:"",csstheme:"",dynplaybutton:"videoplayer-playbutton",dynloader:"videoplayer-loader",dynmessage:"videoplayer-message",dyncontrolbar:"videoplayer-controlbar",tmplplaybutton:"",tmplloader:"",tmplmessage:"",tmplcontrolbar:"",poster:"",source:"",sources:[],forceflash:!1,noflash:!1,rerecordable:!1,autoplay:!1,preload:!1,loop:!1,ready:!0,states:{poster_error:{ignore:!1,click_play:!0}}},types:{forceflash:"boolean",noflash:"boolean",rerecordable:"boolean",loop:"boolean",autoplay:"boolean",preload:"boolean",ready:"boolean"},extendables:["states"],create:function(){this.get("theme")in c.themes&&this.setAll(c.themes[this.get("theme")]),this.set("ie8",d.isInternetExplorer()&&d.internetExplorerVersion()<9),this.set("duration",0),this.set("position",0),this.set("buffered",0),this.set("volume",1),this.set("message",""),this.set("fullscreensupport",!1),this.set("loader_active",!1),this.set("playbutton_active",!1),this.set("controlbar_active",!1),this.set("message_active",!1),this.set("last_activity",i.now()),this.set("activity_delta",0),this.set("playing",!1),this.__attachRequested=!1,this.__activated=!1,this.__error=null,this.host=this.auto_destroy(new k({stateRegistry:new l(this.cls.playerStates())})),this.host.dynamic=this,this.host.initialize(m),this._timer=this.auto_destroy(new j.Timer({context:this,fire:this._timerFire,delay:100,start:!0})),this.properties().compute("buffering",function(){return this.get("playing")&&this.get("buffered")<this.get("position")&&this.get("last_position_change_delta")>1e3},["buffered","position","last_position_change_delta","playing"])},state:function(){return this.host.state()},videoAttached:function(){return!!this.player},videoLoaded:function(){return this.videoAttached()&&this.player.loaded()},videoError:function(){return this.__error},_error:function(a,b){this.__error={error_type:a,error_code:b},this.trigger("error:"+a,b),this.trigger("error",a,b)},_clearError:function(){this.__error=null},_detachVideo:function(){this.set("playing",!1),this.player&&this.player.weakDestroy(),this.player=null},_attachVideo:function(){if(!this.videoAttached()){if(!this.__activated)return void(this.__attachRequested=!0);this.__attachRequested=!1;var a=this.element().find("[data-video='video']").get(0);this._clearError(),e.create({element:a,poster:this.get("poster"),source:this.get("source"),sources:this.get("sources"),forceflash:!!this.get("forceflash"),noflash:!!this.get("noflash"),preload:!!this.get("preload"),loop:!!this.get("loop")}).error(function(a){this._error("attach",a)},this).success(function(a){this.player=a,this.trigger("attached",a),this.player.on("postererror",function(){this._error("poster")},this),this.player.once("loaded",function(){this.set("duration",this.player.duration()),this.set("fullscreensupport",this.player.supportsFullscreen()),this.trigger("loaded")},this),this.player.loaded()&&this.player.trigger("loaded"),this.player.on("playing",function(){this.set("playing",!0),this.trigger("playing")},this),this.player.on("error",function(a){this._error("video",a)},this),this.player.error()&&this.player.trigger("error",this.player.error()),this.player.on("paused",function(){this.set("playing",!1),this.trigger("paused")},this),this.player.on("ended",function(){this.set("playing",!1),this.trigger("ended")},this)},this)}},_afterActivate:function(b){a._afterActivate.call(this,b),this.__activated=!0,this.__attachRequested&&this._attachVideo()},reattachVideo:function(){this._detachVideo(),this._attachVideo()},object_functions:["play","rerecord","pause","seek","set_volume"],functions:{user_activity:function(){this.set("last_activity",i.now()),this.set("activity_delta",0)},message_click:function(){this.trigger("message:click")},playbutton_click:function(){this.host.state().play()},play:function(){this.host.state().play()},rerecord:function(){this.get("rerecordable")&&this.trigger("rerecord")},pause:function(){this.get("playing")&&this.player.pause()},seek:function(a){this.videoLoaded()&&this.player.setPosition(a),this.trigger("seek",a)},set_volume:function(a){a=Math.min(1,a),this.set("volume",a),this.videoLoaded()&&(this.player.setVolume(a),this.player.setMuted(0>=a))},toggle_fullscreen:function(){this.videoLoaded()&&this.player.enterFullscreen()}},destroy:function(){this._detachVideo(),a.destroy.call(this)},_timerFire:function(){try{if(this.videoLoaded()){this.set("activity_delta",i.now()-this.get("last_activity"));var a=this.player.position();(a!=this.get("position")||this.get("last_position_change"))&&this.set("last_position_change",i.now()),this.set("last_position_change_delta",i.now()-this.get("last_position_change")),this.set("position",a),this.set("buffered",this.player.buffered()),this.set("duration",this.player.duration())}}catch(b){}}}},{playerStates:function(){return[n]}}).register("ba-videoplayer").attachStringTable(c.strings).addStrings({"video-error":"An error occurred, please try again later. Click to retry."})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.State",["base:States.State","base:Events.ListenMixin","base:Objs"],function(a,b,c,d){return a.extend({scoped:d},[b,{dynamics:[],_start:function(){this.dyn=this.host.dynamic,c.iter(c.extend({loader:!1,message:!1,playbutton:!1,controlbar:!1},c.objectify(this.dynamics)),function(a,b){this.dyn.set(b+"_active",a)},this)},play:function(){this.dyn.set("autoplay",!0)}}])}),a.define("module:VideoPlayer.Dynamics.PlayerStates.FatalError",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},function(a){return{dynamics:["message"],_locals:["message"],_start:function(){a._start.call(this),this.dyn.set("message",this._message||this.dyn.string("video-error"))}}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.Initial",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},function(a){return{dynamics:["loader"],_start:function(){a._start.call(this),this.dyn.get("ready")?this.next("LoadPlayer"):this.listenOn(this.dyn,"change:ready",function(){this.next("LoadPlayer")})}}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.LoadPlayer",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},function(a){return{dynamics:["loader"],_start:function(){a._start.call(this),this.listenOn(this.dyn,"error:attach",function(){this.next("LoadError")},this),this.listenOn(this.dyn,"error:poster",function(){this.dyn.get("states").poster_error.ignore||this.next("PosterError")},this),this.listenOn(this.dyn,"attached",function(){this.next("PosterReady")},this),this.dyn.reattachVideo()}}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.LoadError",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},function(a){return{dynamics:["message"],_start:function(){a._start.call(this),this.dyn.set("message",this.dyn.string("video-error")),this.listenOn(this.dyn,"message:click",function(){this.next("LoadPlayer")},this)}}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.PosterReady",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},function(a){return{dynamics:["playbutton"],_start:function(){a._start.call(this),this.listenOn(this.dyn,"error:poster",function(){this.dyn.get("states").poster_error.ignore||this.next("PosterError")},this),this.dyn.get("autoplay")&&this.next("LoadVideo")},play:function(){this.next("LoadVideo")}}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.PosterError",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},function(a){return{dynamics:["message"],_start:function(){a._start.call(this),this.dyn.set("message",this.dyn.string("video-error")),this.listenOn(this.dyn,"message:click",function(){this.next(this.dyn.get("states").poster_error.click_play?"LoadVideo":"LoadPlayer")},this)}}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.LoadVideo",["module:VideoPlayer.Dynamics.PlayerStates.State","base:Async"],function(a,b,c){return a.extend({scoped:c},function(a){return{dynamics:["loader"],_start:function(){a._start.call(this),this.listenOn(this.dyn,"error:video",function(){this.next("ErrorVideo")},this),this.listenOn(this.dyn,"playing",function(){this.next("PlayVideo")},this),b.eventually(function(){this.dyn.player.play()},this)}}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.ErrorVideo",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},function(a){return{dynamics:["message"],_start:function(){a._start.call(this),
this.dyn.set("message",this.dyn.string("video-error")),this.listenOn(this.dyn,"message:click",function(){this.next("LoadVideo")},this)}}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.PlayVideo",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},function(a){return{dynamics:["controlbar"],_start:function(){a._start.call(this),this.listenOn(this.dyn,"ended",function(){this.next("PosterReady")},this),this.listenOn(this.dyn,"change:buffering",function(){this.dyn.set("loader_active",this.dyn.get("buffering"))},this),this.listenOn(this.dyn,"error:video",function(){this.next("ErrorVideo")},this)},play:function(){this.dyn.get("playing")||this.dyn.player.play()}}})})}).call(Scoped);